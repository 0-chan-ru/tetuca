"use strict";System.register(["./main","./state","../vendor/underscore"],function(t){function n(t){return Array.isArray(t)?t:Array.from(t)}function r(t,n){return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))}function e(t){return t["class"]="embed",parseHTML(f,t)}function a(t,r){var e=n(r),a=(e[0],e[1]),i=e.slice(2);t+=" (";var o=i.length>1||a;o&&(t+=i.join(", ")),a&&(t+=0>a?" - "+-a:" + "+a);var s=a,u=!0,c=!1,f=void 0;try{for(var l,d=i[Symbol.iterator]();!(u=(l=d.next()).done);u=!0){var v=l.value;s+=v}}catch(m){c=!0,f=m}finally{try{!u&&d["return"]&&d["return"]()}finally{if(c)throw f}}return t+(o?" = ":"")+s+")"}function i(t){return t.replace(/\s*\n\s*/g,"")}var o,s,u,c,f,l,d,v;return{setters:[function(t){o=t.config},function(t){s=t.page,u=t.posts},function(t){c=t.escape}],execute:function(){function n(t){t.html='<del onclick="void(0)">'}function m(){return(o.hard.HTTP.upload||"../upload/")+"?id="+s.get("connID")}function h(t){return t?parseInt(t.getAttribute("id").slice(1),10):0}function p(t){return t?h(t.closest("article, section")):0}function g(t){var n=p(t);return n?u.get(n):null}function y(t){var n=document.createElement("div");n.innerHTML=t;var r=n.childNodes;return Array.from(r)}function b(t){var n=document.createElement("div");return n.innerHTML=t,n.firstChild}function L(t,n,r,e){t.addEventListener(n,function(t){t.target.matches(r)&&e.call(this,t)})}function E(t,n,r){t.addEventListener(n,function(e){r.call(this,e),t.removeEventListener(n,r)})}function w(t){var n=getComputedStyle(t),r=["marginLeft","marginRight","paddingLeft","paddingRight"],e=0,a=!0,i=!1,o=void 0;try{for(var s,u=r[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var c=s.value;e+=parseInt(n[c])}}catch(f){i=!0,o=f}finally{try{!a&&u["return"]&&u["return"]()}finally{if(i)throw o}}return e}function M(t){return t&&"sage"===t.trim()}function S(){var t=Date.now();return imports.isNode?t:(d||(d=imports.main.request("time:offset")),t+d)}function _(t,n){var r=void 0;switch(t){case"#flip":r=(2==n[2]).toString();break;case"#8ball":r=imports.hotConfig.EIGHT_BALL[n[2]-1];break;case"#pyu":case"#pcount":case"#q":r=n[0]}return void 0!==r?c(t+" ("+r+")"):/^#sw/.test(t)?e(n[0]):a(t,n)}function A(t){var n=imports.config.SPOILER_IMAGES,r=n.length,e=void 0;return e=0>t?Math.floor(Math.random()*r):t%r,{index:n[e],next:(e+1)%r}}function I(t){return 1024>t?t+" B":1048576>t?Math.round(t/1024)+" KB":(t=Math.round(t/104857.6).toString(),t.slice(0,-1)+"."+t.slice(-1)+" MB")}function x(t){return(10>t?"0":"")+t}function T(t,n,r,e){return O(l,t,r&&' id="'+r+'"',e&&' class="'+e+'"',n)}function k(t){return Number.isInteger(t)&&500>=t}function C(t){var n="",r="",e=t.indexOf("#");return e>=0&&(n=t.substr(e+1),t=t.substr(0,e),e=n.indexOf("#"),e>=0&&(r=c(n.substr(e+1)),n=n.substr(0,e)),n=c(n)),t=t.trim().replace(imports.hotConfig.EXCLUDE_REGEXP,""),[t.substr(0,100),n.substr(0,128),r.substr(0,128)]}function H(t){for(var n="",r=0;t>r;r++){var e=(36*Math.random()).toString(36)[0];Math.random()<.5&&(e=e.toUpperCase()),n+=e}return n}function O(t){if("string"==typeof t)return i(t);for(var n=arguments.length,r=[],e=1;n>e;e++)r[e-1]=arguments[e];if("function"==typeof t)return i(t(r));var a=t.slice(0,n).map(function(t,n){return r[n-1]+t}).join("");return i(a)}function j(t){var n="";for(var r in t){n+=" ";var e=t[r];e===!0?n+=r:(e||0===e)&&(n+=r+'="'+e+'"')}return n}function D(t){var n="",r=!0,e=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value;(s||0===s)&&(n&&(n+=", "),n+=s)}}catch(u){e=!0,a=u}finally{try{!r&&o["return"]&&o["return"]()}finally{if(e)throw a}}return n}function N(t){var n=o.staff.classes[main.ident&&main.ident.auth];return n&&!!n.rights[t]}f=r(["<syncwatch ",">\n			syncwatch\n		</syncwatch>"],["<syncwatch ",">\n			syncwatch\n		</syncwatch>"]),l=r(['<span class="act">\n			<a href="','"\n				',"\n				","\n			>\n				","\n			</a>\n		</span>"],['<span class="act">\n			<a href="','"\n				',"\n				","\n			>\n				","\n			</a>\n		</span>"]),t("touchable_spoiler_tag",n),t("imageUploadURL",m),t("getNum",h),t("getID",p),t("getModel",g),t("parseEls",y),t("parseEl",b),t("listener",L),t("once",E),t("outerWidth",w),t("isSage",M),d=void 0,t("serverTime",S),t("readable_dice",_),t("pick_spoiler",A),t("thumbStyles",v=["small","sharp","hide"]),t("thumbStyles",v),t("readable_filesize",I),t("pad",x),t("action_link_html",T),t("resonableLastN",k),t("parse_name",C),t("randomID",H),t("parseHTML",O),t("parseAtributes",j),t("commaList",D),t("checkAuth",N)}}});
//# sourceMappingURL=maps/util.js.map
