"use strict";System.register([],function(e){function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function n(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o,i,l,a,r,s,d,c,g,h,u,f,m,p,b,y;return{setters:[],execute:function(){o=n(['<a class="modButton" data-kind="','" title="','">\n					',"\n				</a>"],['<a class="modButton" data-kind="','" title="','">\n					',"\n				</a>"]),i=n(["<style>\n				.postCheckbox {\n					display: inline-block;\n				}\n			</style>"],["<style>\n				.postCheckbox {\n					display: inline-block;\n				}\n			</style>"]),l=n(["<style>\n				header > .mod.addr {\n					display: none;\n				}\n			</style>"],["<style>\n				header > .mod.addr {\n					display: none;\n				}\n			</style>"]),a=require("main"),r=require("./input"),s=require("./panels"),d=require("./util"),c=a.$,g=a._,h=a.Backbone,u=a.common,f=a.lang,m=a.modals,p=u.parseHTML,b={ban:r.ban,log:require("./panels").log,adminPanel:s.adminPanel,notification:r.notification,djPanel:s.djPanel},y=h.View.extend({id:"toolbox",className:"mod modal panel glass",initialize:function(){this.render()},render:function(){var e=this.specs=["clearSelection","spoilerImages","deleteImages","deletePosts","modLog"];"dj"===a.ident.auth&&(e=this.specs=["djPanel"]);var t=[["dj",["toggleMnemonics"]],["moderator",["lockThreads","ban"]],["admin",["sendNotification","renderPanel"]]],n=!0,r=!1,s=void 0;try{for(var d,g=t[Symbol.iterator]();!(n=(d=g.next()).done);n=!0){var h=d.value;if(!u.checkAuth(h[0],a.ident))break;h[1].forEach(function(t){return e.push(t)})}}catch(m){r=!0,s=m}finally{try{!n&&g["return"]&&g["return"]()}finally{if(r)throw s}}for(var b="<span>",y=0;y<e.length;y++){var k=f.mod[e[y]];b+=p(o,y,k[1],k[0])}return b+="</span>",this.$controls=c(b),this.$checkboxToggle=c(p(i)).appendTo("head").prop("disabled",!0),this.$toggle=c('<a id="toolboxToggle">'+f.show+"</a>"),this.$el.prepend(this.$controls,this.$toggle).appendTo(a.$overlay),this.$mnemonicStyle=c(p(l)).appendTo("head").prop("disabled","true"!==localStorage.noMnemonics),this},events:{"click #toolboxToggle":"toggleButtons","click .modButton":"buttonHandler"},toggleButtons:function(){var e=!this.model.get("shown");this.$toggle.text(f[e?"hide":"show"]),this.$controls.toggle(0),this.$checkboxToggle.prop("disabled",!e),this.model.set("shown",e)},buttonHandler:function(e){this[this.specs[e.target.getAttribute("data-kind")]](e)},clearSelection:function(){d.loopCheckboxes(function(e){return e.checked=!1})},toggleMnemonics:function(){var e="true"===localStorage.noMnemonics;this.$mnemonicStyle.prop("disabled",e),localStorage.noMnemonics=!e},send:function(e){a.send([u[e]].concat(t(d.getSelected())))},spoilerImages:function(){this.send("SPOILER_IMAGES")},deleteImages:function(){this.send("DELETE_IMAGES")},toggleChild:function(e){m[e]?m[e].kill():new b[e]},sendNotification:function(){this.toggleChild("notification")},modLog:function(){this.toggleChild("log")},djPanel:function(){this.toggleChild("djPanel")},ban:function(){this.toggleChild("ban")},renderPanel:function(){this.toggleChild("adminPanel")},deletePosts:function(){this.send("DELETE_POSTS")},lockThreads:function(){var e=!0,t=!1,n=void 0;try{for(var o,i=d.getSelected()[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var l=o.value,r=a.state.posts.get(l);r&&!r.get("op")&&a.send([u[r.get("locked")?"UNLOCK_THREAD":"LOCK_THREAD"],l])}}catch(s){t=!0,n=s}finally{try{!e&&i["return"]&&i["return"]()}finally{if(t)throw n}}}}),a.$toolbox=new y({model:new h.Model})}}});
//# sourceMappingURL=../maps/mod/toolbox.js.map
