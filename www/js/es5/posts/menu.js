"use strict";System.register([],function(e){var t,n,r,i,o,a,u,l,s;return{setters:[],execute:function(){t=require("../main"),n=t.$,r=t._,i=t.Backbone,o=t.common,a=t.util,u=t.lang,l=t.state,s=module.exports=i.View.extend({className:"popup-menu glass",tagName:"ul",actions:["report","hide"],events:{click:"handleClick"},initialize:function(e){var t=e.parent;t._popup_menu=this,this.parent=t,this.render()},render:function(){var e="",t=!0,n=!1,r=void 0;try{for(var i,o=this.actions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var l=i.value;e+='<li data-type="'+l+'">'+u[l]+"</li>"}}catch(s){n=!0,r=s}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw r}}var p=this.el,c=this.parent;p.innerHTML=e,c.append(p),p.style.left=p.getBoundingClientRect().left-.6*(a.outerWidth(p)+p.offsetWidth)+"px"},handleClick:function(e){e.stopPropagation(),t.request(e.target.getAttribute("data-type"),this.model),this.remove()},remove:function(){this.parent._popup_menu=null,this.el.remove(),this.stopListening()}}),t.reply("menu:extend",function(e){return r.extend(s.prototype.actions,e)}),t.$threads.on("click",".control",function(e){var t=e.target;if(t._popup_menu)return t._popup_menu.remove();var n=a.getModel(t);n&&new s({parent:t,model:n})})}}});
//# sourceMappingURL=../maps/posts/menu.js.map
