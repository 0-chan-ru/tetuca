"use strict";System.register([],function(e){function t(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.files;if(t.length){var a=n.request("postForm");if(a){var o=a.model.attributes;if(o.uploading||o.uploaded)return}else{var p=i.page.get("thread");if(p)n.request("openPostBox",p);else{var u=e.target.closest("section");u&&n.request("openPostBox",s.getNum(u))}}if(a||(a=n.request("postForm")),t.length>1)return void a.uploadError("Too many files.");var d=a.prepareUpload(),f=new FormData;f.append("image",t[0]);for(var l in d)f.append(l,d[l]);var g=new XMLHttpRequest;g.open("POST",s.uploadURL()),g.setRequestHeader("Accept","application/json"),g.onreadystatechange=r,g.send(f),a.notifyUploading()}}function r(){if(4==this.readyState&&202!=this.status){var e=this.responseText;/legitimate imager response/.test(e)||n.request("postForm").uploadError(e)}}function a(e){e.stopPropagation(),e.preventDefault()}function o(e){function r(t,r){e.addEventListener(t,r,!1)}r("dragenter",a),r("dragexit",a),r("dragover",a),r("drop",t)}var n,s,i;return{setters:[],execute:function(){n=require("./main"),s=n.etc,i=n.state,n.isMobile||n.defer(function(){return o(n.$threads[0])})}}});
//# sourceMappingURL=maps/drop.js.map
