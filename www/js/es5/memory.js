"use strict";System.register(["../vendor/underscore"],function(e,t){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=void 0;try{t=JSON.parse(e)}catch(r){}return n(t)?t:{}}var n,a,c,u,o,s;return{setters:[function(e){n=e.isObject,a=e.isEmpty,c=e.size}],execute:function(){u=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o={},window.addEventListener("storage",function(e){var t=e.key,r=e.newValue;t in o&&(o[t].cached=i(r))}),s=function(){function e(t,i){var n=this;r(this,e),this.key=t,o[t]=this,this.expiry=i,this.cached=this.read(),setTimeout(function(){return n.purgeExpired()},5e3)}return u(e,[{key:"now",value:function(){return Math.floor(Date.now()/1e3)}},{key:"purgeAll",value:function(){localStorage.removeItem(this.key)}},{key:"read",value:function(){var e=localStorage.getItem(this.key);return e?i(e):{}}},{key:"has",value:function(e){return!!this.cached[e]}},{key:"writeAll",value:function(e){return a(e)?this.purgeAll():void localStorage.setItem(this.key,JSON.stringify(e))}},{key:"write",value:function(e){return this.cached=this.read(),this.cached[e]=this.now(),this.writeAll(this.cached),c(this.cached)}},{key:"size",value:function(){return c(this.cached)}},{key:"purgeExpired",value:function(){this.cached=this.read();var e=this.now(),t=86400*this.expiry,r=[];for(var i in this.cached)e>this.cached[i]+t&&r.push(i);if(r.length){var n=!0,a=!1,c=void 0;try{for(var u,o=r[Symbol.iterator]();!(n=(u=o.next()).done);n=!0){var i=u.value;delete this.cached[i]}}catch(s){a=!0,c=s}finally{try{!n&&o["return"]&&o["return"]()}finally{if(a)throw c}}this.writeAll(this.cached)}}}]),e}(),e("default",s)}}});
//# sourceMappingURL=maps/memory.js.map
