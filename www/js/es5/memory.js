"use strict";System.register(["../vendor/underscore","../vendor/js-cookie"],function(e,t){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=void 0;try{t=JSON.parse(e)}catch(r){}return n(t)?t:{}}var n,a,c,o,u,h,s;return{setters:[function(e){n=e.isObject,a=e.isEmpty,c=e.size},function(e){o=e}],execute:function(){u=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),h={},window.addEventListener("storage",function(e){var t=e.key,r=e.newValue;t in h&&(h[t].cached=i(r))}),s=function(){function e(t,i){var n=this;r(this,e),this.key=t,h[t]=this,this.expiry=i,this.cached=this.read(),setTimeout(function(){return n.purgeExpired()},5e3)}return u(e,[{key:"now",value:function(){return Math.floor(Date.now()/1e3)}},{key:"purgeAll",value:function(){localStorage.removeItem(this.key)}},{key:"read",value:function(){var e=localStorage.getItem(this.key);return e?i(e):{}}},{key:"has",value:function(e){return!!this.chached[e]}},{key:"writeAll",value:function(e){return a(e)?this.purgeAll():void localStorage.setItem(this.key,JSON.stringify(e))}},{key:"write",value:function(e){return this.cached=this.read(),this.cached[e]=this.now(),this.writeAll(this.cached),c(this.cached)}},{key:"size",value:function(){return c(this.cached)}},{key:"purgeExpired",value:function(){this.chached=this.read(),now=this.now(),limit=86400*this.expiry,expired=[];for(var e in this.chached)now>this.chached[e]+limit&&expired.push(e);if(expired.length){var t=!0,r=!1,i=void 0;try{for(var n,a=expired[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var e=n.value;delete this.chached[e]}}catch(c){r=!0,i=c}finally{try{!t&&a["return"]&&a["return"]()}finally{if(r)throw i}}this.writeAll(this.chached)}}}]),e}(),e("default",s)}}});
//# sourceMappingURL=maps/memory.js.map
