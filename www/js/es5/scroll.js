"use strict";System.register(["main"],function(n){function t(){h=document.query("#lock"),w=!!u.posts.get("thread")}function e(){var n=document.body.scrollHeight-window.innerHeight;v=n<=window.scrollY,h&&(h.style.visibility=v?"visible":"hidden")}function o(n){return n&&document.contains(n)}function r(n,t){var e=n.getBoundingClientRect(),o=e.top;return t||o>=0&&o<window.innerHeight?o:null}function i(){if(o(y)){var n=r(y);if(null!==n)return n}for(var t=["article","section","threads"],e=0;e<t.length;e++){var i=t[e],l=!0,c=!1,a=void 0;try{for(var u,s=d.queryAll(i)[Symbol.iterator]();!(l=(u=s.next()).done);l=!0){var f=u.value,n=r(f);if(null!==n)return y=f,n}}catch(v){c=!0,a=v}finally{try{!l&&s["return"]&&s["return"]()}finally{if(c)throw a}}}}function l(){if(/^#p\d+$/.test(location.hash)){var n=document.query(location.hash);n&&window.scrollTo(0,r(n)-s.height)}}var c,a,u,d,s,f,v,h,w,y;return{setters:[function(n){c=n.Backbone,a=n.options,u=n.state,d=n.$threads,s=n.$banner,f=n.events}],execute:function(){function c(n){var t=i(),e=n();if(!v||document.hidden&&!a.get("alwaysLock")){if(!o(y))return e;var l=r(y,!0)-t;l&&window.scrollBy(0,l)}else window.scrollTo(0,document.body.scrollHeight);return e}v=void 0,h=void 0,w=void 0,u.page.on("change",t),t(),e(),document.addEventListener("scroll",e),y=void 0,n("followDOM",c),f.reply("scroll:aboveBanner",l),window.onload=l}}});
//# sourceMappingURL=maps/scroll.js.map
