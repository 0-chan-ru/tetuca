{"version":3,"sources":["options/render.js"],"names":["System","register","_export","_context","_taggedTemplateLiteral","strings","raw","Object","freeze","defineProperties","value","renderTab","opts","i","length","html","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","opt","renderOption","err","renderExtras","isShortcut","type","isList","Array","isCheckbox","isNumber","isImage","_lang$labels$opt$id","_slicedToArray","lang","labels","id","label","title","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","item","parseHTML","_templateObject2","modes","_templateObject3","links","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_lang$labels$id","_templateObject4","attrs","name","parseAttributes","filter","options","_templateObject","tabs","_loop","tab","load","hidden","data-content","class","setters","_vendorUnderscore","_util","_opts","_lang","execute","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","push","isArray","TypeError"],"mappings":"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","file":"options/render.js","sourcesContent":["import {filter} from '../../vendor/underscore'\nimport {parseHTML, parseAttributes} from '../util'\nimport options from \"./opts\"\nimport {opts as lang} from 'lang'\n\n// Render the inner HTML of the options panel\nexport default function () {\n\tlet html = '<ul class=\"option_tab_sel\">'\n\tconst {tabs} = lang,\n\t\topts = []\n\n\t// Render tab butts\n\tfor (let i = 0; i < tabs.length; i++) {\n\t\t// Pick the options for this specific tab, according to current\n\t\t// template and server configuration\n\t\topts[i] = filter(options, opt =>\n\t\t\topt.tab === i\n\t\t\t\t&& (opt.load === undefined  || opt.load)\n\t\t\t\t&& !opt.hidden)\n\n\t\tif (!opts[i].length) {\n\t\t\tcontinue\n\t\t}\n\t\tconst attrs = {\n\t\t\t'data-content': `tab-${i}`,\n\t\t\tclass: 'tab_link'\n\t\t}\n\n\t\t// Highlight the first tabButt by default\n\t\tif (i === 0) {\n\t\t\tattrs.class += ' tab_sel'\n\t\t}\n\t\thtml += parseHTML\n\t\t\t`<li>\n\t\t\t\t<a ${parseAttributes(attrs)}>\n\t\t\t\t\t${tabs[i]}\n\t\t\t\t</a>\n\t\t\t</li>`\n\t}\n\n\thtml += '</ul><ul class=\"option_tab_cont\">'\n\tfor (let i = 0; i < opts.length; i++) {\n\t\thtml += renderTab(opts[i], i)\n\t}\n\thtml += '</ul>'\n\n\treturn html\n}\n\n// Render tab contents\nfunction renderTab(opts, i) {\n\tif (!opts.length) {\n\t\treturn ''\n\t}\n\tlet html = \"\"\n\thtml += `<li class=\"tab-${i}`\n\n\t// Show the first tab by default\n\tif (i === 0) {\n\t\thtml += ' tab_sel'\n\t}\n\thtml += '\">'\n\n\t// Render the actual options\n\tfor (let opt of opts) {\n\t\thtml += renderOption(opt)\n\t}\n\n\tif (i === 0) {\n\t\thtml += renderExtras()\n\t}\n\thtml += '</li>'\n\n\treturn html\n}\n\n// Render a single option from it's schema\nfunction renderOption(opt) {\n\tlet html = ''\n\tconst isShortcut = opt.type === 'shortcut',\n\t\tisList = opt.type instanceof Array,\n\t\tisCheckbox = opt.type === 'checkbox' || opt.type === undefined,\n\t\tisNumber = opt.type === 'number',\n\t\tisImage = opt.type === 'image'\n\tif (isShortcut) {\n\t\thtml += 'Alt+'\n\t}\n\tif (!isList) {\n\t\thtml += '<input'\n\t\tif (isCheckbox || isImage)\n\t\t\thtml += ` type=\"${(isCheckbox ? 'checkbox' : 'file')}\"`\n\t\telse if (isNumber)\n\t\t\thtml += ' style=\"width: 4em;\" maxlength=\"4\"'\n\t\telse if (isShortcut)\n\t\t\thtml += ' maxlength=\"1\"'\n\t} else {\n\t\thtml += '<select'\n\t}\n\n\tconst [label,title] = lang.labels[opt.id]\n\thtml += ` id=\"${opt.id}\" title=\"${title}\">`\n\n\tif (isList) {\n\t\tfor (let item of opt.type) {\n\t\t\thtml += parseHTML\n\t\t\t\t`<option value=\"${item}\">\n\t\t\t\t\t${lang.modes[item] || item}\n\t\t\t\t</option>`\n\t\t}\n\t\thtml += '</select>'\n\t}\n\thtml += parseHTML\n\t\t`<label for=\"${opt.id}\" title=\"${title}\">\n\t\t\t${label}\n\t\t</label>\n\t\t<br>`\n\n\treturn html\n}\n\n// Hidden post reset, Export and Import links to first tab\nfunction renderExtras() {\n\tlet html = '<br>'\n\tconst links = ['export', 'import', 'hidden']\n\tfor (let id of links) {\n\t\tconst [label, title] = lang.labels[id]\n\t\thtml += parseHTML\n\t\t\t`<a id=\"${id}\" title=\"${title}\">\n\t\t\t\t${label}\n\t\t\t</a> `\n\t}\n\n\t// Hidden file input for uploading the JSON\n\tconst attrs = {\n\t\ttype: 'file',\n\t\tid: 'importSettings',\n\t\tname: \"Import Settings\"\n\t}\n\thtml += `<input ${parseAttributes(attrs)}>`\n\n\treturn html\n}\n"],"sourceRoot":"/source/"}