{"version":3,"sources":["view.js"],"names":["System","register","_export","_context","_classCallCheck","instance","Constructor","TypeError","Model","extend","_createClass","View","setters","_model","_vendorUnderscore","execute","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","args","this","model","attach","el","document","createElement","tag","_arr","_i","setAttribute","value","remove","detach","type","selector","method","_this","addEventListener","event","matches","events","on","_this2","_this3","removeEventListener","_this4"],"mappings":"AAAA,YAAaA,QAAOC,UAAU,UAAU,wBAAwB,SAASC,EAAQC,GAA6C,QAASC,GAAgBC,EAASC,GAAa,KAAKD,YAAoBC,IAAc,KAAM,IAAIC,WAAU,qCAA7I,GAAIC,GAAMC,EAAOC,EAAaC,CAAsJ,QAAQC,SAAS,SAASC,GAAQL,EAAMK,EAAAA,YAAiB,SAASC,GAAmBL,EAAOK,EAAkBL,SAAUM,QAAQ,WAAWL,EAAa,WAAW,QAASM,GAAiBC,EAAOC,GAAO,IAAI,GAAIC,GAAE,EAAEA,EAAED,EAAME,OAAOD,IAAI,CAAC,GAAIE,GAAWH,EAAMC,EAAGE,GAAWC,WAAWD,EAAWC,aAAY,EAAMD,EAAWE,cAAa,EAAQ,SAAWF,KAAWA,EAAWG,UAAS,GAAKC,OAAOC,eAAeT,EAAOI,EAAWM,IAAIN,IAAc,MAAO,UAASf,EAAYsB,EAAWC,GAAuI,MAAvHD,IAAWZ,EAAiBV,EAAYwB,UAAUF,GAAeC,GAAYb,EAAiBV,EAAYuB,GAAoBvB,MAAkBK,EAAK,WAAW,QAASA,GAAKoB,GAAmH,GAA7G3B,EAAgB4B,KAAKrB,GAAMF,EAAOuB,KAAKD,GAAUC,KAAKC,QAAOD,KAAKC,MAAM,GAAIzB,IAASwB,KAAKC,MAAMC,OAAOF,OAAUA,KAAKG,GAAmF,IAAI,GAA/EA,GAAGH,KAAKG,GAAGC,SAASC,cAAcL,KAAKM,KAAK,OAAWC,GAAM,KAAK,SAAiBC,EAAG,EAAEA,EAAGD,EAAKnB,OAAOoB,IAyBjnC,CAA5B,GAAIb,GAAGY,EAAAC,EACJb,KAAOK,OACPG,EAAGM,aAAad,EAAKK,KAAKL,KAEjC,MAAAjB,GAAAC,IAAAgB,IAAA,SAAAe,MAAA,WAAAV,KAAAG,GAAAQ,SAAAX,KAAAC,MAAAW,OAAAZ,YAAAA,MAAAC,SAAAN,IAAA,KAAAe,MAAA,SAAAG,EAAAC,EAAAC,GAAA,GAAAC,GAAAhB,IAAAA,MAAAG,GAAAc,iBAAAJ,EAAA,SAAAK,GAAAA,EAAAjC,OAAAkC,QAAAL,IAAAE,EAAAD,GAAAG,QAAAvB,IAAA,UAAAe,MAAA,SAAAU,GAAA,IAAA,GAAAN,KAAAM,GAAApB,KAAAqB,GAAA,QAAAP,EAAAM,EAAAN,OAAAnB,IAAA,QAAAe,MAAA,SAAAG,EAAAE,GAAA,GAAAO,GAAAtB,IAAAA,MAAAG,GAAAc,iBAAAJ,EAAA,SAAAK,GAAA,MAAAI,GAAAP,GAAAG,QAAAvB,IAAA,OAAAe,MAAA,SAAAG,EAAAC,EAAAC,GAAA,GAAAQ,GAAAvB,IAAAA,MAAAG,GAAAc,iBAAAJ,EAAA,SAAAK,GAAAA,EAAAjC,OAAAkC,QAAAL,KAAAS,EAAAR,GAAAG,GAAAK,EAAApB,GAAAqB,oBAAAX,EAAAU,EAAAR,UAAApB,IAAA,UAAAe,MAAA,SAAAG,EAAAE,GAAA,GAAAU,GAAAzB,IAAAA,MAAAG,GAAAc,iBAAAJ,EAAA,SAAAK,GAAAO,EAAAV,GAAAG,GAAAO,EAAAtB,GAAAqB,oBAAAX,EAAAY,EAAAV,UAAApC,KAAAT,EAAA,UAAAS","file":"view.js","sourcesContent":["import Model from './model'\nimport {extend} from '../vendor/underscore'\n\n/**\n * Generic view class, that all over view classes extend\n */\nexport default class View {\n    /**\n     * Creates a new View and binds it to the target model. If none, creates a\n     * blank model. If no element suplied, creates a new one from tags. Sets\n     * some other default variables.\n     * @param {Object} args - Attributes to attach to the View instance\n     */\n    constructor(args) {\n        extend(this, args)\n        if (!this.model) {\n            this.model = new Model()\n        }\n        this.model.attach(this)\n\n        // Create element, if none\n        if (!this.el) {\n            const el = this.el = document.createElement(this.tag || 'div')\n\n            // Set element attributes, if any\n            for (let key of ['id', 'class']) {\n                if (key in this) {\n                    el.setAttribute(key, this[key])\n                }\n            }\n        }\n    }\n\n    /**\n     * Remove the element from the DOM and detach from its model, allowing the\n     * View instance to be garbage collected.\n     */\n    remove() {\n        this.el.remove()\n        this.model.detach(this)\n        delete this.model\n    }\n\n    /**\n     * Add selector-specific event listeners to the view\n     * @param {string} type - DOM event type\n     * @param {string} selector - Selector to match the event.target against\n     * @param {string} method - Class method for handling the event\n     */\n    on(type, selector, method) {\n        this.el.addEventListener(type, event => {\n            if (event.target.matches(selector)) {\n                this[method](event)\n            }\n        })\n    }\n\n    /**\n     * Shorthand for adding multiple click event listeners as an object.\n     * We use those the most, so nice to have.\n     * @param {Object} events - Map of selectors to handlers\n     */\n    onClick(events) {\n        for (let selector in events) {\n            this.on('click', selector, events[selector])\n        }\n    }\n\n    /**\n     * Add event listener to view's element, whithout filtering by selector\n     * @param {string} type - DOM event type\n     * @param {string} method - Class method for handling the event\n     */\n    onAll(type, method) {\n        this.el.addEventListener(type, event => this[method](event))\n    }\n\n    /**\n     * Add selector-specific event listener, that will execute only once\n     * @param {string} type - DOM event type\n     * @param {string} selector - Selector to match the event.target against\n     * @param {string} method - Class method for handling the event\n     */\n    once(type, selector, method) {\n        this.el.addEventListener(type, event => {\n            if (event.target.matches(selector)) {\n                this[method](event)\n                this.el.removeEventListener(type, this[method])\n            }\n        })\n    }\n\n    /**\n     * Add event listener, that will execute only once\n     * @param {string} type - DOM event type\n     * @param {string} method - Class method for handling the event\n     */\n    onceAll(type, method) {\n        this.el.addEventListener(type, event => {\n            this[method](event)\n            this.el.removeEventListener(type, this[method])\n        })\n    }\n}\n"],"sourceRoot":"/source/"}