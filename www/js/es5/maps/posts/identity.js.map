{"version":3,"sources":["posts/identity.js"],"names":["System","register","_export","_context","load","id","JSON","parse","localStorage","ident","name","$name","val","email","$email","e","propagate","postForm","main","request","renderIdentity","save","$","$script","_","common","config","setters","execute","require","debounce","LOGIN_KEYWORD","MEDIA_URL","clientHash","stringify","removeItem","defer","on"],"mappings":"AAAA,YAAaA,QAAOC,YAAY,SAASC,EAAQC,GAA+D,QAASC,KAAO,IAAI,GAAIC,GAAGC,KAAKC,MAAMC,aAAaC,MAAUJ,GAAGK,MAAKC,EAAMC,IAAIP,EAAGK,MAASL,EAAGQ,OAAMC,EAAOF,IAAIP,EAAGQ,OAAQ,MAAME,KAAK,QAASC,KAAY,GAAIC,GAASC,EAAKC,QAAQ,WAAeF,IAASA,EAASG,iBAAiBC,IAA3R,GAAIH,GAAKI,EAAEC,EAAQT,EAAOH,EAAMa,EAAEC,EAAOC,EAAOL,CAAmP,QAAQM,WAAWC,QAAQ,WAAWV,EAAKW,QAAQ,WAAWP,EAAEJ,EAAKI,EAAEC,EAAQL,EAAKK,QAAQT,EAAOI,EAAKJ,OAAOH,EAAMO,EAAKP,MAAMa,EAAEN,EAAKM,EAAEC,EAAOP,EAAKO,OAAOC,EAAOR,EAAKQ,OAAOL,EAAKG,EAAEM,SAAS,WAAW,IAAI,GAAIpB,GAAKC,EAAMC,MAAUC,EAAMC,EAAOF,KAA8H,IAArHC,IAAQa,EAAOK,gBAAejB,EAAOF,IAAI,IAAIW,EAAQG,EAAOM,UAAU,iBAAiBd,EAAKe,YAAYpB,GAAM,GAAUH,GAAMG,EAAM,CAAC,GAAIR,KAASK,KAAKL,EAAGK,KAAKA,GAAQG,IAAMR,EAAGQ,MAAMA,GAAML,aAAaC,MAAMH,KAAK4B,UAAU7B,OAAUG,cAAa2B,WAAW,SAAU,MAAMpB,MAAM,KAAMG,EAAKkB,MAAM,WAAWhC,IAAOO,EAAM0B,GAAG,QAAQrB,GAAWF,EAAOuB,GAAG,QAAQrB","file":"posts/identity.js","sourcesContent":["'use strict';System.register([],function(_export,_context){var main,$,$script,$email,$name,_,common,config,save;function load(){try{var id=JSON.parse(localStorage.ident);if(id.name)$name.val(id.name);if(id.email)$email.val(id.email);}catch(e){}}function propagate(){var postForm=main.request('postForm');if(postForm)postForm.renderIdentity();save();}return {setters:[],execute:function(){main=require('../main');$=main.$;$script=main.$script;$email=main.$email;$name=main.$name;_=main._;common=main.common;config=main.config;save=_.debounce(function(){try{var name=$name.val();var email=$email.val();if(email===config.LOGIN_KEYWORD){$email.val('');$script(config.MEDIA_URL+'js/login.js?v='+main.clientHash);email=false;}if(name||email){var id={};if(name)id.name=name;if(email)id.email=email;localStorage.ident=JSON.stringify(id);}else localStorage.removeItem('ident');}catch(e){}},1000);main.defer(function(){load();$name.on('input',propagate);$email.on('input',propagate);});}};});"],"sourceRoot":"/source/"}