{"version":3,"sources":["mod/title.js"],"names":["System","register","_export","_context","_taggedTemplateLiteral","strings","raw","Object","freeze","defineProperties","value","override","parent","method","upgrade","orig","_len2","arguments","length","args","Array","_key2","call","apply","this","concat","_templateObject","main","etc","lang","state","auth","$authName","setters","execute","require","ident","$name","after","common","parseHTML","mod","title","$","oneeSama","hook","el","checked","classList","add","append","document","createTextNode","hotConfig","get","change","request","posts","posting","ComposerView","prototype","_len","_key","msg"],"mappings":"AAAA,YAAaA,QAAOC,YAAY,SAASC,EAAQC,GAAiE,QAASC,GAAuBC,EAAQC,GAAK,MAAOC,QAAOC,OAAOD,OAAOE,iBAAiBJ,GAASC,KAAKI,MAAMH,OAAOC,OAAOF,OAsC9O,QAASK,GAASC,EAAQC,EAAQC,GACjC,GAAMC,GAAOH,EAAOC,EADsBD,GAEnCC,GAAU,WAAmB,IAAA,GAAAG,GAAAC,UAAAC,OAANC,EAAAC,MAAAJ,GAAAK,EAAA,EAAAL,EAAAK,EAAAA,IAAAF,EAAAE,GAAAJ,UAAAI,EAAM,OAC5BP,GAAQQ,KAARC,MAAAT,GAAaU,KAAMT,GAAAU,OAASN,KAzCsB,GAAIO,GAAgBC,EAAKC,EAAIC,EAAKC,EAAMC,EAAKC,CAsCxG,QAAAC,WAAAC,QAAA,WAAAR,EAAAtB,GAAA,iBAAA,+DAAA,iBAAA,iBAAA,+DAAA,iBAlCMuB,EAAOQ,QAAQ,QACnBP,EAAoBD,EAApBC,IAAKC,EAAeF,EAAfE,KAAMC,EAASH,EAATG,MACXC,EAAQJ,EAAKS,MAAbL,KAGFJ,EAAKU,MAAMC,MAAMX,EAAKY,OAAOC,UAAZd,EACCG,EAAKY,IAAIC,MAAM,GAE5Bb,EAAKY,IAAIC,MAAM,KAGdV,EAAYL,EAAKgB,EAAE,aAGzBhB,EAAKiB,SAASC,KAAK,aAAc,SAAAC,GAChC,GAAMC,GAAUf,EAAU,GAAGe,OACzBA,KACHD,EAAGE,UAAUC,IAAa,UAATlB,EAAmB,QAAU,aADlCe,EAETI,OAAOC,SAASC,eAAe,OAC/BtB,EAAMuB,UAAUC,IAAI,iBAAiBvB,QAG1CC,EAAUuB,OAAO,WAAA,MAAM5B,GAAK6B,QAAQ,wBAGpC7C,EAASgB,EAAK8B,MAAMC,QAAQC,aAAaC,UAAW,oBACnD,SAAU7C,GAAe,IAAA,GAAA8C,GAAA5C,UAAAC,OAANC,EAAAC,MAAAyC,EAAA,EAAAA,EAAA,EAAA,GAAAC,EAAA,EAAAD,EAAAC,EAAAA,IAAA3C,EAAA2C,EAAA,GAAA7C,UAAA6C,EAAM,IAClBC,GAAMhD,EAAKO,KAALC,MAAAR,GAAUS,MAAAC,OAASN,GAC/B,OAAIa,GAAU,GAAGe,UAChBgB,EAAIhC,KAAOA,GACLgC","file":"mod/title.js","sourcesContent":["/*\nToggle and preview staff titles on new posts\n */\n\nconst main = require('main'),\n\t{etc, lang, state} = main,\n\t{auth} = main.ident;\n\n// Insert toggler checkbox into name form\nmain.$name.after(main.common.parseHTML\n\t`<label title=\"${lang.mod.title[1]}\" class=\"mod\">\n\t\t<input type=\"checkbox\" id=\"authName\">\n\t\t ${lang.mod.title[0]}\n\t </label>`);\n\nconst $authName = main.$('#authName');\n\n// Preview the title in postForm\nmain.oneeSama.hook('fillMyName', el => {\n\tconst checked = $authName[0].checked;\n\tif (checked) {\n\t\tel.classList.add(auth === 'admin' ? 'admin' : 'moderator');\n\t\tel.append(document.createTextNode(' ## '\n\t\t\t+ state.hotConfig.get('staff_aliases')[auth]));\n\t}\n});\n$authName.change(() => main.request('postForm:indentity'));\n\n// Extend default allocation request\noverride(main.posts.posting.ComposerView.prototype, 'allocationMessage',\n\tfunction (orig, ...args) {\n\t\tconst msg = orig.call(this, ...args);\n\t\tif ($authName[0].checked)\n\t\t\tmsg.auth = auth;\n\t\treturn msg;\n\t});\n\n// Override a method on an object with a new method\nfunction override(parent, method, upgrade) {\n\tconst orig = parent[method];\n\tparent[method] = function (...args) {\n\t\treturn upgrade.call(this, orig, ...args);\n\t}\n}\n"],"sourceRoot":"/source/"}