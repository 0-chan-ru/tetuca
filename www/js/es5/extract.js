"use strict";System.register([],function(e){function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n,r,i,a,s,o,l,u;return{setters:[],execute:function(){n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=require("./main"),i=r._,a=r.util,s=r.options,o=r.state,l=r.posts,u=function(){function e(n){t(this,e);var i=r.$threads[0],a=JSON.parse(document.getElementById("postData").innerHTML);if(r.request("notify:title",a.title),!n){var l=this.mine=o.mine.readAll(),u=this.posts=a.posts;this.extractReplies(i),this.extractThreads(i),o.addLinks(a.links);for(var c in u){var m=u[c].links;if(m)for(var f in m)f in l&&r.request("repliedToMe",u[c].num)}s.get("anonymise")&&r.request("loop:anonymise"),r.request("time:render")}}return n(e,[{key:"extractReplies",value:function(e){for(var t=e.getElementsByTagName("article"),n=0,r=t.length;r>n;n++){var i=t[n];new l.Article({model:new l.models.Post(this.extractModel(i)),el:i})}}},{key:"extractThreads",value:function(e){for(var t=e.getElementsByTagName("section"),n=0;n<t.length;n++){var r=t[n],i=this.extractModel(r);new l.Section({model:new l.models.Thread(i),el:r}).renderOmit(),o.syncs[i.num]=i.hctr}}},{key:"extractModel",value:function(e){var t=this.posts[a.getNum(e)];return t.num in this.mine&&(t.mine=!0),t}}]),e}(),module.exports=u,new u(o.page.get("catalog"))}}});
//# sourceMappingURL=maps/extract.js.map
