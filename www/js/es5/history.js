"use strict";System.register([],function(e){function t(e,t){var o=c.read(e);if(!s.isMatch(c.page.attributes,o)){r.request("connection:lock"),t&&t.preventDefault();var u=e.split("#"),h=u[0]+(/\?/.test(u[0])?"&":"?")+"minimal=true";1!==u.length&&(h+="#"+u[1]),l.show();var d=new XMLHttpRequest;d.open("GET",h),d.onload=function(){return 200!==this.status?(l.hide(),alert(this.status)):(n(e)!==n(this.responseURL)&&(o=c.read(this.responseURL)),r.request("postSM:feed","done"),r.trigger("state:clear"),r.$threads[0].innerHTML=this.response,c.page.set(o),r.oneeSama.op=o.thread,new a(o.catalog),o.catalog||r.request("connection:unlock",[i.RESYNC,o.board,c.syncs,o.live]),t&&(history.pushState(null,null,o.href),location.hash?r.request("scroll:aboveBanner"):window.scrollTo(0,0)),void l.hide())},d.send()}}function n(e){return e.split(/[\?#]/)[0]}var r,o,s,i,a,c,l;return{setters:[],execute:function(){r=require("./main"),o=r.$,s=r._,i=r.common,a=r.Extract,c=r.state,r.$doc.on("click","a.history",function(e){e.ctrlKey||t(this.href,e)}),l=o("#loadingImage"),r.reply("loading:show",function(){return l.show()}),r.reply("loading:hide",function(){return l.hide()}),window.onpopstate=function(e){t(e.target.location.href),r.request("scroll:aboveBanner")}}}});
//# sourceMappingURL=maps/history.js.map
