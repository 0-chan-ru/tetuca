{"version":3,"sources":["client/options/render.js"],"names":[],"mappings":"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","file":"client/options/render.js","sourcesContent":["import {filter} from 'underscore'\nimport {parseHTML, parseAttributes} from '../util'\nimport options from \"./opts\"\nimport {opts as lang} from 'lang'\n\n// Render the inner HTML of the options panel\nexport default function () {\n\tlet html = '<ul class=\"option_tab_sel\">'\n\tconst {tabs} = lang,\n\t\topts = []\n\n\t// Render tab butts\n\tfor (let i = 0; i < tabs.length; i++) {\n\t\t// Pick the options for this specific tab, according to current\n\t\t// template and server configuration\n\t\topts[i] = filter(options, opt =>\n\t\t\topt.tab === i\n\t\t\t\t&& (opt.load === undefined  || opt.load)\n\t\t\t\t&& !opt.hidden)\n\n\t\tif (!opts[i].length) {\n\t\t\tcontinue\n\t\t}\n\t\tconst attrs = {\n\t\t\t'data-content': `tab-${i}`,\n\t\t\tclass: 'tab_link'\n\t\t}\n\n\t\t// Highlight the first tabButt by default\n\t\tif (i === 0) {\n\t\t\tattrs.class += ' tab_sel'\n\t\t}\n\t\thtml += parseHTML\n\t\t\t`<li>\n\t\t\t\t<a ${parseAttributes(attrs)}>\n\t\t\t\t\t${tabs[i]}\n\t\t\t\t</a>\n\t\t\t</li>`\n\t}\n\n\thtml += '</ul><ul class=\"option_tab_cont\">'\n\tfor (let i = 0; i < opts.length; i++) {\n\t\thtml += renderTab(opts[i], i)\n\t}\n\thtml += '</ul>'\n\n\treturn html\n}\n\n// Render tab contents\nfunction renderTab(opts, i) {\n\tif (!opts.length) {\n\t\treturn ''\n\t}\n\tlet html = \"\"\n\thtml += `<li class=\"tab-${i}`\n\n\t// Show the first tab by default\n\tif (i === 0) {\n\t\thtml += ' tab_sel'\n\t}\n\thtml += '\">'\n\n\t// Render the actual options\n\tfor (let opt of opts) {\n\t\thtml += renderOption(opt)\n\t}\n\n\tif (i === 0) {\n\t\thtml += renderExtras()\n\t}\n\thtml += '</li>'\n\n\treturn html\n}\n\n// Render a single option from it's schema\nfunction renderOption(opt) {\n\tlet html = ''\n\tconst isShortcut = opt.type === 'shortcut',\n\t\tisList = opt.type instanceof Array,\n\t\tisCheckbox = opt.type === 'checkbox' || opt.type === undefined,\n\t\tisNumber = opt.type === 'number',\n\t\tisImage = opt.type === 'image'\n\tif (isShortcut) {\n\t\thtml += 'Alt+'\n\t}\n\tif (!isList) {\n\t\thtml += '<input'\n\t\tif (isCheckbox || isImage)\n\t\t\thtml += ` type=\"${(isCheckbox ? 'checkbox' : 'file')}\"`\n\t\telse if (isNumber)\n\t\t\thtml += ' style=\"width: 4em;\" maxlength=\"4\"'\n\t\telse if (isShortcut)\n\t\t\thtml += ' maxlength=\"1\"'\n\t} else {\n\t\thtml += '<select'\n\t}\n\n\tconst [label,title] = lang.labels[opt.id]\n\thtml += ` id=\"${opt.id}\" title=\"${title}\">`\n\n\tif (isList) {\n\t\tfor (let item of opt.type) {\n\t\t\thtml += parseHTML\n\t\t\t\t`<option value=\"${item}\">\n\t\t\t\t\t${lang.modes[item] || item}\n\t\t\t\t</option>`\n\t\t}\n\t\thtml += '</select>'\n\t}\n\thtml += parseHTML\n\t\t`<label for=\"${opt.id}\" title=\"${title}\">\n\t\t\t${label}\n\t\t</label>\n\t\t<br>`\n\n\treturn html\n}\n\n// Hidden post reset, Export and Import links to first tab\nfunction renderExtras() {\n\tlet html = '<br>'\n\tconst links = ['export', 'import', 'hidden']\n\tfor (let id of links) {\n\t\tconst [label, title] = lang.labels[id]\n\t\thtml += parseHTML\n\t\t\t`<a id=\"${id}\" title=\"${title}\">\n\t\t\t\t${label}\n\t\t\t</a> `\n\t}\n\n\t// Hidden file input for uploading the JSON\n\tconst attrs = {\n\t\ttype: 'file',\n\t\tid: 'importSettings',\n\t\tname: \"Import Settings\"\n\t}\n\thtml += `<input ${parseAttributes(attrs)}>`\n\n\treturn html\n}\n"],"sourceRoot":"/source/"}