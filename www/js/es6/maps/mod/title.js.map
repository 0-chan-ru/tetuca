{"version":3,"sources":["mod/title.js"],"names":[],"mappings":"iGAIM,WAAO,QAAQ,MAAR,CAAP,OACJ,IAAoB,KAApB,UAAK,KAAe,KAAf,KAAN,MAAY,MAAS,KAAT,KAAZ,OACC,KAAQ,KAAK,KAAL,CAAR,KAGF,KAAK,KAAL,CAAW,KAAX,CAAiB,KAAK,MAAL,CAAY,SAAZ,CACf,cAAD,GAAiB,KAAK,GAAL,CAAS,KAAT,CAAe,CAAf,CAAjB,EAAmC;;GAAnC,GAEI,KAAK,GAAL,CAAS,KAAT,CAAe,CAAf,CAFJ,EAEsB;UAFtB,CADgB,CAAjB,CAMA,MAAM,UAAY,KAAK,CAAL,CAAO,WAAP,CAAZ,CAGN,KAAK,QAAL,CAAc,IAAd,CAAmB,YAAnB,CAAiC,MAAM,CACtC,MAAM,QAAU,UAAU,CAAV,EAAa,OAAb,CADsB,GAElC,OAAJ,CAAa,CACZ,GAAG,SAAH,CAAa,GAAb,CAAiB,OAAS,OAAT,CAAmB,OAAnB,CAA6B,WAA7B,CAAjB,CADY,EAEZ,CAAG,MAAH,CAAU,SAAS,cAAT,CAAwB,OAC/B,MAAM,SAAN,CAAgB,GAAhB,CAAoB,eAApB,EAAqC,IAArC,CAD+B,CAAlC,EAFY,CAAb,CAFgC,CAAjC,CAQA,UAAU,MAAV,CAAiB,MAAM,KAAK,OAAL,CAAa,oBAAb,CAAN,CAAjB,CAGA,SAAS,KAAK,KAAL,CAAW,OAAX,CAAmB,YAAnB,CAAgC,SAAhC,CAA2C,mBAApD,CACC,SAAU,IAAV,CAAyB,+BAAN,mFAAM,MAClB,IAAM,KAAK,IAAL,CAAU,IAAV,CAAgB,GAAG,IAAH,CAAtB,CADkB,GAEpB,UAAU,CAAV,EAAa,OAAb,CACH,IAAI,IAAJ,CAAW,IAAX,CADD,OAEO,GAAP,CAJwB,CAAzB,CADD,CASA,SAAS,QAAT,CAAkB,MAAlB,CAA0B,MAA1B,CAAkC,OAAlC,CAA2C,CAC1C,MAAM,KAAO,OAAO,MAAP,CAAP,CADoC,MAE1C,CAAO,MAAP,EAAiB,UAAmB,gCAAN,6EAAM,OAC5B,QAAQ,IAAR,CAAa,IAAb,CAAmB,IAAnB,CAAyB,GAAG,IAAH,CAAhC,CADmC,CAAnB,CAFyB,CAA3C","file":"mod/title.js","sourcesContent":["/*\nToggle and preview staff titles on new posts\n */\n\nconst main = require('main'),\n\t{etc, lang, state} = main,\n\t{auth} = main.ident;\n\n// Insert toggler checkbox into name form\nmain.$name.after(main.common.parseHTML\n\t`<label title=\"${lang.mod.title[1]}\" class=\"mod\">\n\t\t<input type=\"checkbox\" id=\"authName\">\n\t\t ${lang.mod.title[0]}\n\t </label>`);\n\nconst $authName = main.$('#authName');\n\n// Preview the title in postForm\nmain.oneeSama.hook('fillMyName', el => {\n\tconst checked = $authName[0].checked;\n\tif (checked) {\n\t\tel.classList.add(auth === 'admin' ? 'admin' : 'moderator');\n\t\tel.append(document.createTextNode(' ## '\n\t\t\t+ state.hotConfig.get('staff_aliases')[auth]));\n\t}\n});\n$authName.change(() => main.request('postForm:indentity'));\n\n// Extend default allocation request\noverride(main.posts.posting.ComposerView.prototype, 'allocationMessage',\n\tfunction (orig, ...args) {\n\t\tconst msg = orig.call(this, ...args);\n\t\tif ($authName[0].checked)\n\t\t\tmsg.auth = auth;\n\t\treturn msg;\n\t});\n\n// Override a method on an object with a new method\nfunction override(parent, method, upgrade) {\n\tconst orig = parent[method];\n\tparent[method] = function (...args) {\n\t\treturn upgrade.call(this, orig, ...args);\n\t}\n}\n"],"sourceRoot":"/source/"}