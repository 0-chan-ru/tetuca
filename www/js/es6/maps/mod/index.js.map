{"version":3,"sources":["mod/index.js"],"names":[],"mappings":"iGAIM,WAAO,QAAQ,MAAR,CAAP,OACJ,EAAa,KAAb,QAAG,OAAU,KAAV,OAML,MAAM,MAAQ,KAAK,KAAL,CAAa,OAAO,KAAP,CAG3B,OAAO,YAAP,CAAsB,MAAM,KAAN,CACtB,OAAO,MAAP,CAAgB,MAAM,IAAN,CAGhB,KAAK,QAAL,CAAgB,EAAE,6BAAF,EAAiC,QAAjC,CAA0C,MAA1C,CAAhB,CAGA,KAAK,MAAL,CAAc,EAAd,CAEA,QAAQ,SAAR,EACA,QAAQ,WAAR,EAEA,EAAE,SAAF,CAAa,CACZ,IAAK,YAAL,CACA,KAAM,CAAC,GAAE,OAAO,SAAP,EAAiB,cAApB,GAAoC,KAAK,OAAL,EAAa,CAAvD,CAFD,EAGG,QAHH,CAGY,MAHZ,EAMA,MAAM,MAAQ,OAAO,WAAP,CACd,EAAE,SAAF,EACE,QADF,CACW,GADX,EAEE,IAFF,GAGE,KAHF,CAGQ,CAAC,aAAD,GAAgB,KAAhB,EAAsB,mBAAtB,GAA2C,KAA3C,EAAiD,IAAjD,CAHR","file":"mod/index.js","sourcesContent":["/*\nClient-side administration logic\n */\n\nconst main = require('main'),\n\t{$, config} = main;\n\n//XXX: This module in general is not very DRY. Need to refactor later.\n\n// Only used to affect some client rendering practises. Anything actually\n// needing security has stricter authorisation checks.\nconst ident = main.ident = window.IDENT;\n\n// Pass login status to ./www/js/login.js\nwindow.loggedInUser = ident.email;\nwindow.x_csrf = ident.csrf;\n\n// Container for all moderation modals\nmain.$overlay = $('<div id=\"modOverlay\"></div>').appendTo('body');\n\n// Open modal map\nmain.modals = {};\n\nrequire('./title');\nrequire('./toolbox');\n\n$('<link/>', {\n\trel: 'stylesheet',\n\thref: `${config.MEDIA_URL}css/mod.css?v=${main.cssHash}`\n}).appendTo('head');\n\n// Add staff board to board navigation\nconst staff = config.STAFF_BOARD;\n$('#navTop')\n\t.children('a')\n\t.last()\n\t.after(` / <a href=\"/${staff}/\" class=\"history\">${staff}</a>`);\n"],"sourceRoot":"/source/"}