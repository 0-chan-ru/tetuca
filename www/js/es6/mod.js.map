{"version":3,"sources":["node_modules/browser-pack/_prelude.js","client/mod/input.js","client/mod/panels.js","client/mod/title.js","client/mod/toolbox.js","client/mod/util.js","client/index.js"],"names":[],"mappings":"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","file":"mod.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*\nVarious input boxes\n */\n\nconst main = require('main'),\n\tutil = require('./util'),\n\t{$, Backbone, common, lang, modals} = main,\n\t{parseHTML} = common;\n\nconst InputBoxView = Backbone.View.extend({\n\tclassName: 'mod inputBox',\n\tevents: {\n\t\tsubmit: 'submit'\n\t},\n\tinitialize() {\n\t\tmodals[this.type] = this;\n\t\tthis.render();\n\t},\n\trender() {\n\t\tconst html = parseHTML\n\t\t\t`<form>\n\t\t\t\t${this.renderInput()}\n\t\t\t\t<input type=\"submit\" value=\"${lang.send}\">\n\t\t\t</form>`;\n\t\tthis.$el\n\t\t\t.html(html)\n\t\t\t.prependTo(main.$toolbox.$el)\n\t\t\t.find('input').first().focus();\n\t},\n\tsubmit(event) {\n\t\tevent.preventDefault();\n\t\tconst values = [];\n\t\t$(event.target).find('input[type!=submit]').each(function () {\n\t\t\tvalues.push(this.type === 'checkbox' ? this.checked : this.value);\n\t\t});\n\t\tthis.handler(values);\n\t},\n\tkill() {\n\t\tdelete modals[this.type];\n\t\tthis.remove();\n\t}\n});\n\nconst NotificationInputView = InputBoxView.extend({\n\ttype: 'notification',\n\trenderInput() {\n\t\treturn parseHTML `<input ${{\n\t\t\ttype: 'text',\n\t\t\tsize: 25,\n\t\t\tplaceholder: lang.mod.placeholders.msg\n\t\t}}>`;\n\t},\n\thandler(msg) {\n\t\tmain.send([common.NOTIFICATION, msg[0]]);\n\t\tthis.kill();\n\t}\n});\nexports.notification = NotificationInputView;\n\nconst BanInputView = InputBoxView.extend({\n\ttype: 'ban',\n\trenderInput() {\n\t\tlet html = '';\n\t\tfor (let field of ['days', 'hours', 'minutes']) {\n\t\t\thtml += parseHTML `<input ${{\n\t\t\t\ttype: 'number',\n\t\t\t\tplaceholder: lang.mod.placeholders[field]\n\t\t\t}}>`\n\t\t}\n\t\thtml += parseHTML `<input ${{\n\t\t\ttype: 'text',\n\t\t\tsize: 25,\n\t\t\tplaceholder: lang.mod.placeholders.reason\n\t\t}}>`;\n\t\tconst [label, title] = lang.mod.displayBan;\n\t\thtml += parseHTML\n\t\t\t`<label ${{title}}>\n\t\t\t\t<input type=\"checkbox\">\n\t\t\t\t${label}\n\t\t\t</label>`;\n\t\treturn html;\n\t},\n\thandler(info) {\n\t\t// Ensure reason field is filled\n\t\tif (!info[3])\n\t\t\treturn this.renderReasonPrompt();\n\t\t\n\t\t// Coerce time units and checkbox value to integers\n\t\tfor (let i = 0; i < 3; i++) {\n\t\t\tinfo[i] = +info[i];\n\t\t}\n\t\tinfo[4] = +info[4];\n\t\tfor (let num of util.getSelected()) {\n\t\t\tmain.send([common.BAN, num, ...info]);\n\t\t}\n\t\tthis.kill();\n\t},\n\trenderReasonPrompt() {\n\t\tthis.$el.find('.reasonPrompt').remove();\n\t\tthis.$el\n\t\t\t.append(parseHTML\n\t\t\t\t`<b class=\"reasonPrompt admin\">\n\t\t\t\t\t${lang.mod.needReason}\n\t\t\t\t</b>`)\n\t\t\t.find('input[type=text]').focus();\n\t}\n});\nexports.ban = BanInputView;\n","/*\nModeration log modal view\n */\n\nconst main = require('main'),\n\t{_, Backbone, common, dispatcher, etc, oneeSama, lang, modals, Memory,\n\t\tstate} = main\n\nconst PanelView = Backbone.View.extend({\n\tclassName: 'modal mod panel glass',\n\tinitialize() {\n\t\tthis.$el.appendTo(main.$overlay);\n\t\tmodals[this.type] = this;\n\n\t\t// Register websocket handler\n\t\tdispatcher[this.kind] = msg => this.render(msg[0]);\n\t\t// Send request\n\t\tmain.send([this.kind]);\n\t},\n\trender(info) {\n\t\tif (!info.length) {\n\t\t\treturn this.el.innerHTML = \"God's in his Heaven. All's right\"\n\t\t\t\t+ \" with the world.\";\n\t\t}\n\t\tthis.el.innerHTML = this.renderContents(info);\n\t\tthis.postRender && this.postRender()\n\n\t\t// Scroll to the end of the log\n\t\tthis.el.scrollTop = this.el.scrollHeight;\n\t\treturn this;\n\t},\n\tkill() {\n\t\tdelete dispatcher[this.kind];\n\t\tdelete modals[this.type];\n\t\tthis.remove();\n\t}\n});\n\nconst ModLogView = PanelView.extend({\n\ttype: 'log',\n\tkind: common.MOD_LOG,\n\trenderContents(info) {\n\t\treturn table(info, act => [\n\t\t\t// Unbans do not have a target post\n\t\t\tact.num ? oneeSama.postRef(act.num, act.op) : '',\n\t\t\tlang.mod.formatLog(act),\n\t\t\toneeSama.time(act.time)\n\t\t]);\n\t}\n});\nexports.log = ModLogView;\n\nconst AdminPanelView = PanelView.extend({\n\ttype: 'adminPanel',\n\tid: 'adminPanel',\n\tkind: common.ADMIN_PANEL,\n\tevents: {\n\t\t'click .unban': 'unban'\n\t},\n\trenderContents(info) {\n\t\tthis.banCount = 0;\n\t\treturn table(info, ban => {\n\t\t\tthis.banCount++;\n\t\t\treturn [\n\t\t\t\toneeSama.mnemonic(ban[0]),\n\t\t\t\toneeSama.time(ban[1]),\n\t\t\t\t`<a class=\"unban\" data-id=\"${ban[0]}\">${lang.mod.unban}</a>`\n\t\t\t];\n\t\t});\n\t},\n\tunban(event) {\n\t\tconst el = event.target;\n\t\tmain.send([common.UNBAN, el.getAttribute('data-id')]);\n\t\tel.parentElement.parentElement.remove();\n\n\t\t// Check if any bans left\n\t\tif (!--this.banCount)\n\t\t\tthis.kill();\n\t}\n});\nexports.adminPanel = AdminPanelView;\n\n/**\n * Construct a table from an array of items and a consumer funtion that returns\n * an array of column contents.\n */\nfunction table(rows, func) {\n\tlet html = '<table>';\n\tfor (let row of rows) {\n\t\thtml += '<tr>';\n\t\tfor (let cell of func(row)) {\n\t\t\thtml += `<td>${cell}</td>`;\n\t\t}\n\t\thtml += '</tr>';\n\t}\n\thtml += '</table>';\n\treturn html;\n}\n\nconst RequestPanelView = PanelView.extend({\n\ttype: 'djPanel',\n\tevents: {\n\t\t'click .close': 'removeRequest',\n\t\t'click #rescan': 'scan'\n\t},\n\n\t/**\n\t * Override parent method, because we don't query the server\n\t */\n\tinitialize() {\n\t\tmain.$overlay[0].append(this.el)\n\t\tmodals[this.type] = this;\n\t\tthis.removed = new Memory('request', 2)\n\t    this.scan()\n\t},\n\n\t/**\n\t * Scan thread for `/r/ song` strings, we have not removed yet\n\t */\n\tscan() {\n\t    const removed = this.removed.readAll(),\n\t\t\trequests = []\n\t\tfor (let {attributes} of state.posts.models) {\n\t\t\t// Post's request(s) already processed\n\t\t\tif (attributes.num in removed)\n\t\t\t\tcontinue\n\t\t    const m = attributes.body.match(/\\/r\\/[^\\n]+$/gm)\n\t\t\tif (!m)\n\t\t\t    continue\n\t\t\tfor (let request of m) {\n\t\t\t    request = request.replace('/r/', '').trim()\n\t\t\t\trequests.push([attributes.num, attributes.mnemonic, request])\n\t\t\t}\n\t\t}\n\t\treturn this.render(_.sortBy(requests, 1))\n\t},\n\n\t/**\n\t * Render the inner table\n\t */\n\trenderContents(requests) {\n\t\treturn table(requests, request => [\n\t\t\toneeSama.postRef(request[0], oneeSama.op).safe,\n\t\t\toneeSama.mnemonic(request[1]),\n\t\t\trequest[2],\n\t\t\t`<a class=\"close\" data-id=\"${request[0]}\">X</a>`\n\t\t])\n\t},\n\n\t/**\n\t * Extra rendering operations to perform that deviate from parent class\n\t */\n\tpostRender() {\n\t    this.el.append(etc.parseDOM(`<a id=\"rescan\">${lang.rescan}</a>`)[0])\n\t},\n\n\t/**\n\t * Remove a request from the list and persist removal to localStorage\n\t */\n\tremoveRequest(event) {\n\t\tevent.preventDefault()\n\t\tconst el = event.target\n\t\tthis.removed.write(el.getAttribute('data-id'))\n\t\tel.closest('tr').remove()\n\t}\n})\nexports.djPanel = RequestPanelView\n","/*\nToggle and preview staff titles on new posts\n */\n\nconst main = require('main'),\n\t{etc, lang, state} = main,\n\t{auth} = main.ident;\n\n// Insert toggler checkbox into name form\nmain.$name.after(main.common.parseHTML\n\t`<label title=\"${lang.mod.title[1]}\" class=\"mod\">\n\t\t<input type=\"checkbox\" id=\"authName\">\n\t\t ${lang.mod.title[0]}\n\t </label>`);\n\nconst $authName = main.$('#authName');\n\n// Preview the title in postForm\nmain.oneeSama.hook('fillMyName', el => {\n\tconst checked = $authName[0].checked;\n\tif (checked) {\n\t\tel.classList.add(auth === 'admin' ? 'admin' : 'moderator');\n\t\tel.append(document.createTextNode(' ## '\n\t\t\t+ state.hotConfig.get('staff_aliases')[auth]));\n\t}\n});\n$authName.change(() => main.request('postForm:indentity'));\n\n// Extend default allocation request\noverride(main.posts.posting.ComposerView.prototype, 'allocationMessage',\n\tfunction (orig, ...args) {\n\t\tconst msg = orig.call(this, ...args);\n\t\tif ($authName[0].checked)\n\t\t\tmsg.auth = auth;\n\t\treturn msg;\n\t});\n\n// Override a method on an object with a new method\nfunction override(parent, method, upgrade) {\n\tconst orig = parent[method];\n\tparent[method] = function (...args) {\n\t\treturn upgrade.call(this, orig, ...args);\n\t}\n}\n","/*\nView containing controls of moderation actions\n */\n\nconst main = require('main'),\n\tinput = require('./input'),\n\tpanels = require('./panels'),\n\tutil = require('./util'),\n\t{$, _, Backbone, common, lang, modals} = main,\n\t{parseHTML} = common;\n\nconst childViews = {\n\tban: input.ban,\n\tlog: require('./panels').log,\n\tadminPanel: panels.adminPanel,\n\tnotification: input.notification,\n\tdjPanel: panels.djPanel\n};\n\nconst ToolboxView = Backbone.View.extend({\n\tid: 'toolbox',\n\tclassName: 'mod modal panel glass',\n\tinitialize() {\n\t\tthis.render();\n\t},\n\trender() {\n\t\tlet specs = this.specs = [\n\t\t\t'clearSelection',\n\t\t\t'spoilerImages',\n\t\t\t'deleteImages',\n\t\t\t'deletePosts',\n\t\t\t'modLog'\n\t\t];\n\n\t\t// Add aditional panel buttons by priveledge level\n\t\tif (main.ident.auth === 'dj')\n\t\t\tspecs = this.specs = ['djPanel']\n\t\tconst accessLevels = [\n\t\t\t['dj', ['toggleMnemonics']],\n\t\t\t['moderator', ['lockThreads', 'ban']],\n\t\t\t['admin', ['sendNotification', 'renderPanel']]\n\t\t]\n\t\tfor (let level of accessLevels) {\n\t\t\tif (!common.checkAuth(level[0], main.ident))\n\t\t\t\tbreak\n\t\t\tlevel[1].forEach(right => specs.push(right))\n\t\t}\n\n\t\tlet controls = '<span>';\n\t\tfor (let i = 0; i < specs.length; i++) {\n\t\t\tconst ln = lang.mod[specs[i]];\n\t\t\tcontrols += parseHTML\n\t\t\t\t`<a class=\"modButton\" data-kind=\"${i}\" title=\"${ln[1]}\">\n\t\t\t\t\t${ln[0]}\n\t\t\t\t</a>`;\n\t\t}\n\t\tcontrols += '</span>';\n\t\tthis.$controls = $(controls);\n\n\t\tthis.$checkboxToggle = $(parseHTML\n\t\t\t\t`<style>\n\t\t\t\t.postCheckbox {\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t}\n\t\t\t</style>`\n\t\t)\n\t\t\t.appendTo('head')\n\t\t\t// Disabled only works if the emelemnt is in the DOM\n\t\t\t.prop('disabled', true);\n\n\t\tthis.$toggle = $(`<a id=\"toolboxToggle\">${lang.show}</a>`);\n\t\tthis.$el.prepend(this.$controls, this.$toggle)\n\t\t\t.appendTo(main.$overlay);\n\n\t\t// Sets mnemonic visbility\n\t\tthis.$mnemonicStyle = $(parseHTML\n\t\t\t\t`<style>\n\t\t\t\theader > .mod.addr {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\t\t\t</style>`\n\t\t)\n\t\t\t.appendTo('head')\n\t\t\t.prop('disabled', localStorage.noMnemonics !== 'true');\n\t\treturn this;\n\t},\n\tevents: {\n\t\t'click #toolboxToggle': 'toggleButtons',\n\t\t'click .modButton': 'buttonHandler'\n\t},\n\ttoggleButtons() {\n\t\tconst hidden = !this.model.get('shown');\n\t\tthis.$toggle.text(lang[hidden ? 'hide' : 'show']);\n\t\tthis.$controls.toggle(0);\n\t\tthis.$checkboxToggle.prop('disabled', !hidden);\n\t\tthis.model.set('shown', hidden);\n\t},\n\tbuttonHandler(event) {\n\t\tthis[this.specs[event.target.getAttribute('data-kind')]](event);\n\t},\n\tclearSelection() {\n\t\tutil.loopCheckboxes(el => el.checked = false);\n\t},\n\ttoggleMnemonics() {\n\t\tconst hide = localStorage.noMnemonics === 'true';\n\t\tthis.$mnemonicStyle.prop('disabled', hide);\n\t\tlocalStorage.noMnemonics = !hide;\n\t},\n\tsend(type) {\n\t\tmain.send([common[type], ...util.getSelected()]);\n\t},\n\tspoilerImages() {\n\t\tthis.send('SPOILER_IMAGES');\n\t},\n\tdeleteImages() {\n\t\tthis.send('DELETE_IMAGES');\n\t},\n\ttoggleChild(type) {\n\t\tif(modals[type])\n\t\t\tmodals[type].kill();\n\t\telse\n\t\t\tnew childViews[type];\n\t},\n\t// Push a notification message to all clients\n\tsendNotification() {\n\t\tthis.toggleChild('notification');\n\t},\n\tmodLog() {\n\t\tthis.toggleChild('log');\n\t},\n\tdjPanel() {\n\t    this.toggleChild('djPanel')\n\t},\n\tban() {\n\t\tthis.toggleChild('ban');\n\t},\n\trenderPanel() {\n\t\tthis.toggleChild('adminPanel');\n\t},\n\tdeletePosts() {\n\t\tthis.send('DELETE_POSTS');\n\t},\n\tlockThreads() {\n\t\tfor (let num of util.getSelected()) {\n\t\t\tconst model = main.state.posts.get(num);\n\t\t\t// Model exists and is an OP\n\t\t\tif (!model || model.get('op'))\n\t\t\t\tcontinue;\n\t\t\tmain.send([\n\t\t\t\tcommon[!model.get('locked') ? 'LOCK_THREAD' : 'UNLOCK_THREAD'],\n\t\t\t\tnum\n\t\t\t]);\n\t\t}\n\t}\n});\n\nmain.$toolbox = new ToolboxView({\n\tmodel: new Backbone.Model()\n});\n","/*\nCommon utility functions\n */\n\nconst main = require('main');\n\n// Gather salected post checkboxes\nfunction getSelected() {\n\tconst checked = [];\n\tloopCheckboxes(el => el.checked && checked.push(main.etc.getID(el)));\n\n\t// Postforms will not have an ID, so we remove falsy values\n\treturn main._.compact(checked);\n}\nexports.getSelected = getSelected;\n\nfunction loopCheckboxes(func) {\n\tconst els = main.$threads[0].getElementsByClassName('postCheckbox');\n\tfor (let i = 0; i < els.length; i++) {\n\t\tfunc(els[i]);\n\t}\n}\nexports.loopCheckboxes = loopCheckboxes;\n","/*\nClient-side administration logic\n */\n\nconst main = require('main'),\n\t{$, config} = main;\n\n//XXX: This module in general is not very DRY. Need to refactor later.\n\n// Only used to affect some client rendering practises. Anything actually\n// needing security has stricter authorisation checks.\nconst ident = main.ident = window.IDENT;\n\n// Pass login status to ./www/js/login.js\nwindow.loggedInUser = ident.email;\nwindow.x_csrf = ident.csrf;\n\n// Container for all moderation modals\nmain.$overlay = $('<div id=\"modOverlay\"></div>').appendTo('body');\n\n// Open modal map\nmain.modals = {};\n\nrequire('./title');\nrequire('./toolbox');\n\n$('<link/>', {\n\trel: 'stylesheet',\n\thref: `${config.MEDIA_URL}css/mod.css?v=${main.cssHash}`\n}).appendTo('head');\n\n// Add staff board to board navigation\nconst staff = config.STAFF_BOARD;\n$('#navTop')\n\t.children('a')\n\t.last()\n\t.after(` / <a href=\"../${staff}/\" class=\"history\">${staff}</a>`);\n"]}