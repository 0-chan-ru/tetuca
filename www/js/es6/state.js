'use strict';System.register(['underscore','backbone','./memory','main','./util','backbone.radio'],function(_export){var extend,Backbone,Memory,$threads,randomID,radio;return {setters:[function(_underscore){extend=_underscore.extend;},function(_backbone){Backbone=_backbone;},function(_memory){Memory=_memory.default;},function(_main){$threads=_main.$threads;},function(_util){randomID=_util.randomID;},function(_backboneRadio){radio=_backboneRadio;}],execute:function(){const events=radio.channel('main');_export('events',events);function read(href){const state={board:href.match(/\/([a-zA-Z0-9]+?)\//)[1],thread:href.match(/\/(\d+)(:?#\d+)?(?:[\?&]\w+=\w+)*$/),lastN:href.match(/[\?&]last=(\d+)/)};for(let key of ['thread','lastN']){const val=state[key];state[key]=val?parseInt(val[1]):0;}return state;}_export('read',read);let page=new Backbone.Model(read(location.href));_export('page',page);page.set('tabID',randomID(32));let syncs={};_export('syncs',syncs);const ownPosts={};_export('ownPosts',ownPosts);const mine=new Memory('mine',2,true);_export('mine',mine);const posts=new Backbone.Collection();_export('posts',posts);function clear(){$threads.innerHTML='';models.each(model => model.dispatch('stopListening'));posts.reset();exports.syncs={};events.request('massExpander:unset');}_export('clear',clear);const links={};_export('links',links);function addLinks(addition){if(addition){extend(links,addition);}}_export('addLinks',addLinks);function init(){}_export('init',init);}};});
//# sourceMappingURL=maps/state.js.map
