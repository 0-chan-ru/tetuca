// This file is automatically generated by qtc from "thread.qtpl".
// See https://github.com/valyala/quicktemplate for details.

//line thread.qtpl:1
package templates

//line thread.qtpl:1
import (
	qtio422016 "io"

	qt422016 "github.com/valyala/quicktemplate"
)

//line thread.qtpl:1
import "github.com/bakape/meguca/lang"

//line thread.qtpl:2
import "github.com/bakape/meguca/common"

//line thread.qtpl:3
import "github.com/bakape/meguca/config"

//line thread.qtpl:5
var (
	_ = qtio422016.Copy
	_ = qt422016.AcquireByteBuffer
)

//line thread.qtpl:5
func streamrenderThread(qw422016 *qt422016.Writer, postHTML []byte, ln lang.Pack) {
	//line thread.qtpl:5
	qw422016.N().S(`<span class="aside-container top-margin"><span class="act" id="top"><a href="#bottom">`)
	//line thread.qtpl:9
	qw422016.N().S(ln.UI["bottom"])
	//line thread.qtpl:9
	qw422016.N().S(`</a></span><span id="expand-images" class="act"><a>`)
	//line thread.qtpl:14
	qw422016.N().S(ln.Common.Posts["expandImages"])
	//line thread.qtpl:14
	qw422016.N().S(`</a></span></span><noscript>TODO: Noscript post creation</noscript><hr>`)
	//line thread.qtpl:22
	qw422016.N().Z(postHTML)
	//line thread.qtpl:22
	qw422016.N().S(`<div id="bottom-spacer"></div><aside class="act posting glass"><a>`)
	//line thread.qtpl:26
	qw422016.N().S(ln.UI["reply"])
	//line thread.qtpl:26
	qw422016.N().S(`</a></aside><hr><span class="aside-container"><span class="act" id="bottom"><a href="." class="history">`)
	//line thread.qtpl:33
	qw422016.N().S(ln.UI["return"])
	//line thread.qtpl:33
	qw422016.N().S(`</a></span><span class="act"><a href="#top">`)
	//line thread.qtpl:38
	qw422016.N().S(ln.UI["top"])
	//line thread.qtpl:38
	qw422016.N().S(`</a></span><span class="act"><a href="?last=100" class="history reload">`)
	//line thread.qtpl:43
	qw422016.N().S(ln.Common.UI["last"])
	//line thread.qtpl:43
	qw422016.N().S(` `)
	//line thread.qtpl:43
	qw422016.N().S(`100</a></span><span id="lock" style="visibilty: hidden;">`)
	//line thread.qtpl:47
	qw422016.N().S(ln.UI["lockedToBottom"])
	//line thread.qtpl:47
	qw422016.N().S(`</span></span>`)
//line thread.qtpl:50
}

//line thread.qtpl:50
func writerenderThread(qq422016 qtio422016.Writer, postHTML []byte, ln lang.Pack) {
	//line thread.qtpl:50
	qw422016 := qt422016.AcquireWriter(qq422016)
	//line thread.qtpl:50
	streamrenderThread(qw422016, postHTML, ln)
	//line thread.qtpl:50
	qt422016.ReleaseWriter(qw422016)
//line thread.qtpl:50
}

//line thread.qtpl:50
func renderThread(postHTML []byte, ln lang.Pack) string {
	//line thread.qtpl:50
	qb422016 := qt422016.AcquireByteBuffer()
	//line thread.qtpl:50
	writerenderThread(qb422016, postHTML, ln)
	//line thread.qtpl:50
	qs422016 := string(qb422016.B)
	//line thread.qtpl:50
	qt422016.ReleaseByteBuffer(qb422016)
	//line thread.qtpl:50
	return qs422016
//line thread.qtpl:50
}

// ThreadPosts renders the post content of a thread. Separate function to allow
// caching of generated posts.

//line thread.qtpl:54
func StreamThreadPosts(qw422016 *qt422016.Writer, t common.Thread, json []byte, omit, imageOmit int) {
	//line thread.qtpl:54
	qw422016.N().S(`<div id="thread-container">`)
	//line thread.qtpl:56
	root := config.Get().RootURL

	//line thread.qtpl:57
	streamrenderArticle(qw422016, t.Post, t.ID, omit, imageOmit, t.Subject, root)
	//line thread.qtpl:58
	for _, p := range t.Posts {
		//line thread.qtpl:59
		streamrenderArticle(qw422016, p, t.ID, 0, 0, "", root)
		//line thread.qtpl:60
	}
	//line thread.qtpl:60
	qw422016.N().S(`</div><script id="post-data" type="application/json">`)
	//line thread.qtpl:63
	qw422016.N().Z(json)
	//line thread.qtpl:63
	qw422016.N().S(`</script><script id="board-configs" type="application/json">`)
	//line thread.qtpl:66
	qw422016.N().Z(config.GetBoardConfigs(t.Board).JSON)
	//line thread.qtpl:66
	qw422016.N().S(`</script>`)
//line thread.qtpl:68
}

//line thread.qtpl:68
func WriteThreadPosts(qq422016 qtio422016.Writer, t common.Thread, json []byte, omit, imageOmit int) {
	//line thread.qtpl:68
	qw422016 := qt422016.AcquireWriter(qq422016)
	//line thread.qtpl:68
	StreamThreadPosts(qw422016, t, json, omit, imageOmit)
	//line thread.qtpl:68
	qt422016.ReleaseWriter(qw422016)
//line thread.qtpl:68
}

//line thread.qtpl:68
func ThreadPosts(t common.Thread, json []byte, omit, imageOmit int) string {
	//line thread.qtpl:68
	qb422016 := qt422016.AcquireByteBuffer()
	//line thread.qtpl:68
	WriteThreadPosts(qb422016, t, json, omit, imageOmit)
	//line thread.qtpl:68
	qs422016 := string(qb422016.B)
	//line thread.qtpl:68
	qt422016.ReleaseByteBuffer(qb422016)
	//line thread.qtpl:68
	return qs422016
//line thread.qtpl:68
}
