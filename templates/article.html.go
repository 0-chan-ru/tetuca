// This file is automatically generated by qtc from "article.html".
// See https://github.com/valyala/quicktemplate for details.

//line templates/article.html:1
package templates

//line templates/article.html:1
import (
	qtio422016 "io"

	qt422016 "github.com/valyala/quicktemplate"
)

//line templates/article.html:1
import "fmt"

//line templates/article.html:2
import "strconv"

//line templates/article.html:3
import "github.com/bakape/meguca/common"

//line templates/article.html:5
var (
	_ = qtio422016.Copy
	_ = qt422016.AcquireByteBuffer
)

//line templates/article.html:5
func streamrenderArticle(qw422016 *qt422016.Writer, p common.Post, op uint64, omit, imageOmit int, subject, root string) {
	//line templates/article.html:6
	id := strconv.FormatUint(p.ID, 10)

	//line templates/article.html:6
	qw422016.N().S(`<article id="p`)
	//line templates/article.html:7
	qw422016.N().S(id)
	//line templates/article.html:7
	qw422016.N().S(`" class="glass`)
	//line templates/article.html:7
	if p.Editing {
		//line templates/article.html:7
		qw422016.N().S(`editing`)
		//line templates/article.html:7
	}
	//line templates/article.html:7
	qw422016.N().S(`"> <header class="spaced"> `)
	//line templates/article.html:9
	if subject != "" {
		//line templates/article.html:9
		qw422016.N().S(`<h3>「`)
		//line templates/article.html:10
		qw422016.E().S(subject)
		//line templates/article.html:10
		qw422016.N().S(`」</h3> `)
		//line templates/article.html:11
	}
	//line templates/article.html:11
	qw422016.N().S(`<b class="name"`)
	//line templates/article.html:12
	if p.Auth != "" {
		//line templates/article.html:12
		qw422016.N().S(`class="admin"`)
		//line templates/article.html:12
	}
	//line templates/article.html:12
	qw422016.N().S(`> `)
	//line templates/article.html:14
	if p.Name != "" || p.Trip == "" {
		//line templates/article.html:15
		if p.Name != "" {
			//line templates/article.html:16
			qw422016.E().S(p.Name)
			//line templates/article.html:17
		} else {
			//line templates/article.html:17
			qw422016.N().S(`Anonymous`)
			//line templates/article.html:19
		}
		//line templates/article.html:20
		if p.Trip != "" {
			//line templates/article.html:21
			qw422016.N().S(` `)
			//line templates/article.html:22
		}
		//line templates/article.html:23
	}
	//line templates/article.html:24
	if p.Trip != "" {
		//line templates/article.html:24
		qw422016.N().S(`<code>!`)
		//line templates/article.html:25
		qw422016.E().S(p.Trip)
		//line templates/article.html:25
		qw422016.N().S(`</code>`)
		//line templates/article.html:26
	}
	//line templates/article.html:27
	if p.Auth != "" {
		//line templates/article.html:27
		qw422016.N().S(`##`)
		//line templates/article.html:28
		qw422016.N().S(` `)
		//line templates/article.html:28
		qw422016.E().S(p.Auth)
		//line templates/article.html:29
	}
	//line templates/article.html:30
	qw422016.N().S(`</b> <time>`)
	//line templates/article.html:32
	qw422016.N().S(formatTime(p.Time))
	//line templates/article.html:32
	qw422016.N().S(`</time> <nav> <a href="#p`)
	//line templates/article.html:34
	qw422016.N().S(id)
	//line templates/article.html:34
	qw422016.N().S(`">No.</a> <a class="quote" href="#p`)
	//line templates/article.html:35
	qw422016.N().S(id)
	//line templates/article.html:35
	qw422016.N().S(`">`)
	//line templates/article.html:35
	qw422016.N().S(id)
	//line templates/article.html:35
	qw422016.N().S(`</a> </nav> <a class="control"> <svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 8 8"> <path d="M1.5 0l-1.5 1.5 4 4 4-4-1.5-1.5-2.5 2.5-2.5-2.5z" transform="translate(0 1)" /> </svg> </a> </header> `)
	//line templates/article.html:43
	var src string

	//line templates/article.html:44
	if p.Image != nil {
		//line templates/article.html:45
		img := *p.Image

		//line templates/article.html:46
		src = sourcePath(img.FileType, img.SHA1)

		//line templates/article.html:46
		qw422016.N().S(`<figcaption class="spaced"> <a class="image-toggle act" hidden></a> <span class="spaced image-search-container"> <a class="image-search google" target="_blank" rel="nofollow" href="https://www.google.com/searchbyimage?image_url=`)
		//line templates/article.html:50
		qw422016.N().S(src)
		//line templates/article.html:50
		qw422016.N().S(`">G</a> <a class="image-search iqdb" target="_blank" rel="nofollow" href="http://iqdb.org/?url=`)
		//line templates/article.html:51
		qw422016.N().S(src)
		//line templates/article.html:51
		qw422016.N().S(`">Iq</a> <a class="image-search saucenao" target="_blank" rel="nofollow" href="http://saucenao.com/search.php?db=999&url=`)
		//line templates/article.html:52
		qw422016.N().S(src)
		//line templates/article.html:52
		qw422016.N().S(`">Sn</a> <a class="image-search desustorage" target="_blank" rel="nofollow" href="https://desuarchive.org/_/search/image/`)
		//line templates/article.html:53
		qw422016.N().S(img.MD5)
		//line templates/article.html:53
		qw422016.N().S(`">Ds</a> <a class="image-search exhentai" target="_blank" rel="nofollow" href="http://exhentai.org/?fs_similar=1&fs_exp=1&f_shash=`)
		//line templates/article.html:54
		qw422016.N().S(img.SHA1)
		//line templates/article.html:54
		qw422016.N().S(`">Ex</a> </span> <span> `)
		//line templates/article.html:57
		qw422016.N().S(`(`)
		//line templates/article.html:59
		if img.Audio {
			//line templates/article.html:59
			qw422016.N().S(`♫,`)
			//line templates/article.html:60
			qw422016.N().S(` `)
			//line templates/article.html:61
		}
		//line templates/article.html:62
		if img.Length != 0 {
			//line templates/article.html:63
			l := img.Length

			//line templates/article.html:64
			if l < 60 {
				//line templates/article.html:65
				qw422016.N().S(fmt.Sprintf("0:%02d", l))
				//line templates/article.html:66
			} else {
				//line templates/article.html:67
				min := l / 6

				//line templates/article.html:68
				qw422016.N().S(fmt.Sprintf("%02d:%02d", min, l-min))
				//line templates/article.html:69
			}
			//line templates/article.html:69
			qw422016.N().S(`,`)
			//line templates/article.html:70
			qw422016.N().S(` `)
			//line templates/article.html:71
		}
		//line templates/article.html:72
		if img.APNG {
			//line templates/article.html:72
			qw422016.N().S(`APNG,`)
			//line templates/article.html:73
			qw422016.N().S(` `)
			//line templates/article.html:74
		}
		//line templates/article.html:75
		qw422016.N().S(readableFileSize(img.Size))
		//line templates/article.html:75
		qw422016.N().S(`,`)
		//line templates/article.html:75
		qw422016.N().S(` `)
		//line templates/article.html:76
		qw422016.N().S(strconv.FormatUint(uint64(img.Dims[0]), 10))
		//line templates/article.html:76
		qw422016.N().S(`x`)
		//line templates/article.html:78
		qw422016.N().S(strconv.FormatUint(uint64(img.Dims[1]), 10))
		//line templates/article.html:78
		qw422016.N().S(`)`)
		//line templates/article.html:80
		qw422016.N().S(`</span> `)
		//line templates/article.html:82
		name := imageName(img.FileType, img.Name)

		//line templates/article.html:82
		qw422016.N().S(`<a href="`)
		//line templates/article.html:83
		qw422016.N().S(src)
		//line templates/article.html:83
		qw422016.N().S(`" download="`)
		//line templates/article.html:83
		qw422016.N().S(name)
		//line templates/article.html:83
		qw422016.N().S(`">`)
		//line templates/article.html:83
		qw422016.N().S(name)
		//line templates/article.html:83
		qw422016.N().S(`</a> </figcaption> `)
		//line templates/article.html:85
	}
	//line templates/article.html:85
	qw422016.N().S(`<div class="post-container"> `)
	//line templates/article.html:87
	if p.Image != nil {
		//line templates/article.html:88
		img := *p.Image

		//line templates/article.html:88
		qw422016.N().S(`<figure> <a target="_blank" href="`)
		//line templates/article.html:90
		qw422016.N().S(src)
		//line templates/article.html:90
		qw422016.N().S(`"> `)
		//line templates/article.html:91
		if img.Spoiler {
			//line templates/article.html:91
			qw422016.N().S(`<!-- TODO: board-specific server-side spoiler rendering --> <img src="/assets/spoil/default.jpg" width="125" height="125"> `)
			//line templates/article.html:94
		} else {
			//line templates/article.html:95
			w, h := correctDims(subject != "", img.Dims[2], img.Dims[3])

			//line templates/article.html:95
			qw422016.N().S(`<img src="`)
			//line templates/article.html:96
			qw422016.N().S(thumbPath(img.FileType, img.SHA1))
			//line templates/article.html:96
			qw422016.N().S(`" width="`)
			//line templates/article.html:96
			qw422016.N().S(w)
			//line templates/article.html:96
			qw422016.N().S(`" height="`)
			//line templates/article.html:96
			qw422016.N().S(h)
			//line templates/article.html:96
			qw422016.N().S(`"> `)
			//line templates/article.html:97
		}
		//line templates/article.html:97
		qw422016.N().S(`</a> </figure> `)
		//line templates/article.html:100
	}
	//line templates/article.html:100
	qw422016.N().S(`<blockquote>`)
	//line templates/article.html:101
	qw422016.N().S(renderBody(p, op))
	//line templates/article.html:101
	qw422016.N().S(`</blockquote> </div> `)
	//line templates/article.html:103
	if omit != 0 {
		//line templates/article.html:103
		qw422016.N().S(`<span class="omit" data-omit="`)
		//line templates/article.html:104
		qw422016.N().D(omit)
		//line templates/article.html:104
		qw422016.N().S(`" data-image-omit="`)
		//line templates/article.html:104
		qw422016.N().D(imageOmit)
		//line templates/article.html:104
		qw422016.N().S(`"> `)
		//line templates/article.html:106
		qw422016.N().D(omit)
		//line templates/article.html:106
		qw422016.N().S(` `)
		//line templates/article.html:106
		qw422016.N().S(`post`)
		//line templates/article.html:106
		if omit > 1 {
			//line templates/article.html:106
			qw422016.N().S(`s`)
			//line templates/article.html:106
		}
		//line templates/article.html:107
		qw422016.N().S(` `)
		//line templates/article.html:107
		qw422016.N().S(`and`)
		//line templates/article.html:107
		qw422016.N().S(` `)
		//line templates/article.html:107
		qw422016.N().D(imageOmit)
		//line templates/article.html:108
		qw422016.N().S(` `)
		//line templates/article.html:108
		qw422016.N().S(`image`)
		//line templates/article.html:108
		if imageOmit > 1 {
			//line templates/article.html:108
			qw422016.N().S(`s`)
			//line templates/article.html:108
		}
		//line templates/article.html:108
		qw422016.N().S(`omitted`)
		//line templates/article.html:109
		qw422016.N().S(` `)
		//line templates/article.html:110
		qw422016.N().S(`<span class="act"> <a href="`)
		//line templates/article.html:112
		qw422016.N().S(strconv.FormatUint(op, 10))
		//line templates/article.html:112
		qw422016.N().S(`" class="history">See All</a> </span> </span> `)
		//line templates/article.html:115
	}
	//line templates/article.html:116
	if p.Backlinks != nil {
		//line templates/article.html:116
		qw422016.N().S(`<small> `)
		//line templates/article.html:118
		for id, link := range p.Backlinks {
			//line templates/article.html:119
			qw422016.N().S(renderPostLink(id, link.OP, link.Board, link.OP != op))
			//line templates/article.html:120
		}
		//line templates/article.html:120
		qw422016.N().S(`</small> `)
		//line templates/article.html:122
	}
	//line templates/article.html:122
	qw422016.N().S(`</article> `)
//line templates/article.html:124
}

//line templates/article.html:124
func writerenderArticle(qq422016 qtio422016.Writer, p common.Post, op uint64, omit, imageOmit int, subject, root string) {
	//line templates/article.html:124
	qw422016 := qt422016.AcquireWriter(qq422016)
	//line templates/article.html:124
	streamrenderArticle(qw422016, p, op, omit, imageOmit, subject, root)
	//line templates/article.html:124
	qt422016.ReleaseWriter(qw422016)
//line templates/article.html:124
}

//line templates/article.html:124
func renderArticle(p common.Post, op uint64, omit, imageOmit int, subject, root string) string {
	//line templates/article.html:124
	qb422016 := qt422016.AcquireByteBuffer()
	//line templates/article.html:124
	writerenderArticle(qb422016, p, op, omit, imageOmit, subject, root)
	//line templates/article.html:124
	qs422016 := string(qb422016.B)
	//line templates/article.html:124
	qt422016.ReleaseByteBuffer(qb422016)
	//line templates/article.html:124
	return qs422016
//line templates/article.html:124
}
